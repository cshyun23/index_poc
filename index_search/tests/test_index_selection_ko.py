import pytest

# 상세한 테스트 케이스: 사용자가 "적절한 인덱스(색인)를 찾으라"는 질문을 한국어로 제시.
# 실제 분류기/검색기로 연결해 검증할 수 있도록 텍스트 질문들을 모아둠.
# 각 레벨은 최소 25문항 이상 포함.

EASY_QUERIES = [
    "한국의 관광 정보 색인을 찾으려면 어떤 인덱스를 사용해야 하나요?",
    "미국 주별 법률 문서의 적절한 인덱스는 무엇인가요?",
    "제품 설명을 검색할 때 사용할 기본 인덱스는 무엇인가요?",
    "도시별 음식점 목록을 조회할 최적의 인덱스는 무엇인가요?",
    "뉴스 헤드라인을 빠르게 찾으려면 어떤 인덱스가 적합합니까?",
    "영문 기술 문서 검색에 적합한 인덱스는 무엇인가요?",
    "회사 연락처 정보를 찾기 위한 인덱스는 무엇이 좋을까요?",
    "지역 행사 정보를 조회할 때 쓸 인덱스는 무엇인가요?",
    "이미지 메타데이터를 검색할 인덱스는 어떤 것이죠?",
    "제품 카테고리별로 색인할 때 기본 인덱스 권장사항은?",
    "사용자 프로필을 빠르게 조회할 인덱스는 무엇인가요?",
    "카테고리: 여행 — 관련 색인을 어떻게 선택해야 하나요?",
    "도서 제목 검색에 적합한 인덱스는 무엇인가요?",
    "간단한 키워드 검색에 적합한 기본 인덱스는?",
    "지역 코드로 매핑되는 인덱스를 무엇이라고 부르나요?",
    "블로그 글 색인으로 적합한 인덱스는 무엇인가요?",
    "이메일 주소로 레코드를 찾을 인덱스는 어떤 형태여야 하나요?",
    "제품 SKU로 조회할 때 쓸 인덱스 추천은?",
    "단일 필드(예: 이름)로 자주 조회되는 경우 어떤 인덱스를 만드나요?",
    "카테고리+서브카테고리 조합으로 검색할 인덱스는?",
    "간단한 범주 검색(예: 전자제품)에 적합한 인덱스는?",
    "사용자 활동 로그를 빠르게 검색할 인덱스는?",
    "태그 기반 검색을 위한 인덱스 구성은 어떻게 하나요?",
    "국가별 연락처 색인을 선택해야 할 때 우선 기준은?",
    "사전 정의된 목록(예: 도시 목록) 검색에 적합한 인덱스는?"
]

MEDIUM_QUERIES = [
    "한국의 시/군/구 계층에서 '공공도서관'을 찾을 때 어떤 인덱스를 선택해야 하나요?",
    "유럽 연합 관련 규정 문서를 국가/주제별로 분류할 최적 인덱스는?",
    "상품 리뷰와 평점을 동시에 고려해 검색하려면 어떤 인덱스를 만들어야 하나요?",
    "지역(국가) + 산업(예: 금융) 조합으로 인덱스를 설계할 때 권장 구조는?",
    "법률 문서에서 조항번호와 키워드를 함께 검색할 인덱스 설계는?",
    "언어(한국어/영어) 필터가 있는 문서 검색에 적합한 인덱스는?",
    "도시 수준에서 관광지·맛집·숙박을 분류하려면 계층 인덱스는 어떻게?",
    "상품 카탈로그에서 브랜드+카테고리+세부속성으로 조회시 인덱스 전략은?",
    "국가별 세율표와 기간(년도) 조건을 함께 검색하려면 어떤 인덱스가 유리한가요?",
    "대용량 로그에서 이벤트 타입+타임스탬프 조합으로 빠른 조회하려면?",
    "다국어 제품 설명을 언어별로 효과적으로 인덱싱하는 방법은?",
    "지리적 반경(예: 반경 5km) 기반 검색을 위해 어떤 인덱스를 사용하나요?",
    "사용자 권한(예: 관리자/일반) 기반으로 결과를 필터링할 인덱스 구성은?",
    "의료 기록에서 환자ID+진단코드로 검색할 때 권장 인덱스는?",
    "뉴스 기사에서 주제별(정치/경제) + 날짜 범위 검색을 위한 인덱스는?",
    "상품 재고 조회에서 창고 위치+상품ID로 빠른 조회를 위한 인덱스는?",
    "같은 제품의 다른 바리에이션(색상/사이즈)을 빠르게 찾기 위한 인덱스는?",
    "여러 국가에 분산된 문서를 국가->도시->기관 계층으로 분류할 인덱스는?",
    "시간대(timezone) 차이가 있는 국제 트랜잭션을 조회할 인덱스 설계는?",
    "사용자 행동 시퀀스(이벤트 순서) 검색에 최적화된 인덱스는?",
    "지리적 영역(국가/주/도시) + 카테고리(예: 교육) 혼합 검색 인덱스는?",
    "대량의 제품 옵션에 대해 색인 크기를 최소화하면서 조회 속도 유지하는 방법은?",
    "문서 버전 관리(버전별 조회)를 쉽게 하려면 어떤 인덱스가 필요할까?",
    "복합 키(예: country_id + type_id + date)로 자주 조회할 때 인덱스 설계는?",
    "차트/통계용 집계 쿼리를 위해 사전 집계 인덱스를 만들어야 할까?"
]

HARD_QUERIES = [
    "다국적 기업의 글로벌 색인을 만들 때 국가->사업부->제품->버전 4단계 계층을 어떻게 설계해야 하나요?",
    "법적 관할권이 교차하는 사건(예: 다국적 분쟁)을 국가별·사건유형별·법원단계별로 분류하려면 인덱스 전략은?",
    "실시간 분석이 필요한 스트리밍 데이터에서 시간창+지역+이벤트타입 4차원 인덱싱을 어떻게 구현하나?",
    "언어 감지(자동)와 감성 분석 결과를 결합해 다중 언어 문서를 색인하는 최적의 방법은?",
    "정책 문서의 적용 범위가 국가·주·도시·기관으로 중첩될 때 우선순위 기반 계층 인덱스 설계는?",
    "지리적 다중계층(대륙->국가->주->도시)과 도메인(교육/보건/교통)을 동시에 고려한 검색 인덱스는?",
    "규제 준수(예: GDPR) 때문에 일부 국가별 필드를 분리해야 할 때 인덱스 분할 전략은?",
    "대규모 멀티테넌트 시스템에서 테넌트->서비스->리소스->버전 4레벨 색인 네임스페이스 설계는?",
    "시계열 데이터와 메타데이터(예: 센서 위치, 기기 유형)를 함께 인덱싱하여 고속 필터링하려면?",
    "LLM 기반 분류기로 4단계(국가/유형/하위유형/세부)를 자동 매핑할 때 학습·미세조정용 레이블 구조는?",
    "다국어·다중문서포맷(PDF/HTML/WORD) 환경에서 내용 기반 유사도 검색과 계층 분류를 결합하려면?",
    "거래 데이터에서 규칙 기반 탐지와 임베딩 유사도 기반 검색을 결합한 하이브리드 인덱스는 어떻게 구성하나?",
    "데이터 개인정보마스킹 요구가 있는 컬럼을 색인하면서 검색 효율을 유지하는 구조는?",
    "국가별 표준 코드(예: ISO, FIPS)와 내부 분류체계를 매핑하는 4단계 인덱스 전략은?",
    "다중 지역(섹션) 결과를 우선순위(예: 로컬 우선)로 반환하는 인덱스/랭킹 설계는?",
    "대규모 텍스트 컬렉션에서 주제-하위주제-엔티티-관계 4계층을 자동으로 생성하려면 어떤 인덱싱 파이프라인이 필요한가?",
    "색인 업데이트 빈도가 매우 높은 환경에서 일관성(Consistency)과 가용성(Availability)을 균형있게 유지하는 인덱스 설계는?",
    "지리적 경계가 자주 변경되는 데이터에서 경계 기반 색인의 유지와 이력관리를 어떻게 설계하나?",
    "다단계 권한(국가관리자/지역관리자/조직원/외부사용자)에 따른 검색 접근제어를 인덱스 수준에서 구현하려면?",
    "복합 조건(예: 국가=A, 타입 IN (X,Y), 날짜 BETWEEN 등)에서 쿼리 플래닝을 고려한 인덱스 설계 최적화는?",
    "멀티모달(텍스트+이미지) 문서에서 각 모달리티별 인덱스와 통합 랭킹 전략은?",
    "대규모 분산 색인에서 샤딩(shard) 키를 국가/유형/날짜 중 어느 것으로 정해야 하는가?",
    "계층적 분류 오류를 LLM이 제안할 때 후처리 규칙(재분류 등)을 적용하려면 어떤 인덱스 메타데이터가 필요할까?",
    "임베딩 기반 근사 탐색(ANN)과 정밀 RDB 조회를 조합한 하이브리드 검색 플로우 설계는?",
    "규모가 큰 국가별·산업별 데이터 세트에서 비용(저장/검색) 대비 성능 최적화 인덱스 전략은?"
]

@pytest.mark.parametrize("q", EASY_QUERIES)
def test_easy_queries_nonempty(q):
    # 실제 시스템에 연결하여 분류/검색 결과를 검증하도록 확장 가능
    assert isinstance(q, str) and len(q) > 0

@pytest.mark.parametrize("q", MEDIUM_QUERIES)
def test_medium_queries_nonempty(q):
    assert isinstance(q, str) and len(q) > 0

@pytest.mark.parametrize("q", HARD_QUERIES)
def test_hard_queries_nonempty(q):
    assert isinstance(q, str) and len(q) > 0